<!doctype html>
<html lang="en">
  <head>
    <base href="http://127.0.0.1:3000/c/git/supahero1.github.io/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flesto | Docs</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" type="text/css" href="style.css" media="all">
  </head>
  <body>
    <section id="top-bar">
      <table>
        <tr>
          <th>
            <img src="icon.png" width="32" height="32">
          </th>
          <th>
            <a id="name" class="noul" href="https://github.com/supahero1">Sh√§dam</a>
          </th>
          <th id="title">Flesto</th>
          <th>
            <a id="home" class="noul" href="./">Home</a>
          </th>
        </tr>
      </table>
    </section>
    <section id="page">
      <div>
        <h1 id="Contents" class="al">Contents</h1>
        <h3>1. <a class="ul" href="docs/flesto/#Description">Description</a></h3>
        <h3>2. <a class="ul" href="docs/flesto/#Assessment">Assessment</a></h3>
        <h3>3. <a class="ul" href="docs/flesto/#Specification">Specification</a></h3>
        <h3>4. <a class="ul" href="docs/flesto/#Trivia">Trivia</a></h3>
        <h3>5. <a class="ul" href="docs/flesto/#Documentation">Documentation</a></h3>
        <hr>
        <h1 id="Description" class="al">1. Description</h1>
        <h3>Flesto was created to manage big chunks of memory that can chaotically change in short amount of time. In order to minimize the effect of <span>realloc</span> copying data from one place to another, space is divided into chunks. Think about flesto as something in between a linked list and an array.</h3>
        <h3>This is only one of the solutions though. You might as well allocate a lot of memory, more than you need, to be sure you never need to realloc, but you will waste a lot of memory. If you want something balanced between memory and performance, flesto is a great pick.</h3>
        <hr>
        <h1 id="Assessment" class="al">2. Assessment</h1>
        <h3 class="dark">Pros:</h3>
        <h3>- Excellent for managing big memory amounts</h3>
        <h3>- Minimal memory footprint (12-24 bytes per chunk)</h3>
        <h3>- Flexible, allowing chunks of varying sizes</h3>
        <h3>- Easy manipulation of the underlying structure</h3>
        <h3 class="dark">Cons:</h3>
        <h3>- Time consuming if one needs more complicated operations, like adding multiple items at once</h3>
        <h3>Always benchmark your application before picking a library. It might be possible flesto does not offer any performance increase if you need to do many time-consuming operations on the structure, or if you hardly-ever <span>realloc</span>, or if there is little memory to manage.</h3>
        <hr>
        <h1 id="Specification" class="al">3. Specification</h1>
        <h3>Flesto consists of <span>parts</span> (or <span>chunks</span>), which are defined as the following:</h3>
        <pre class="code">
struct flesto_part {
  /* pointer to the memory of this part */
  char* <i>contents</i>;
  
  /* absolute size of contents */
  unsigned long <i>max_capacity</i>;
  
  /* currently used amount of contents */
  unsigned long <i>capacity</i>;
};
</pre>
        <h3>Both <i>max_capacity</i> and <i>capacity</i> count space in bytes.</h3>
        <h3>Each part's memory is created using <span>malloc</span>, either internally or by the user. Naturally, different parts have their memory in different places, but flesto treats them as if they were one contiguous piece of memory by storing them in an array:</h3>
        <pre class="code">
=================================
| PART 1 |     PART 2     | P 3 |
=================================
PART 1 - 8 bytes
PART 2 - 16 bytes
PART 3 - 5 bytes
</pre>
        <h3>The array of parts is the only piece within flesto that will require <span>realloc</span>. To not make the array too big and cause <span>realloc</span> to potentially become a bottleneck, a perfect size for parts should be measured and used.</h3>
        <h3>Even part sizes can sometimes create problems - look <a class="dark" href="docs/flesto/#Trivia">trivia</a>.</h3>
        <h3>Lastly, flesto is defined as the following:</h3>
        <pre class="code">
struct flesto {
  /* the array of parts */
  struct flesto_part* <i>parts</i>;
  
  /* index of the last part (in case some of the parts are empty) */
  unsigned long <i>last_part</i>;
  
  /* size of the array of parts */
  unsigned long <i>max_amount_of_parts</i>;
  
  /* default value of maximum size of a part */
  unsigned long <i>default_max_capacity</i>;
  
  /* look <a href="docs/flesto/#Trivia">trivia</a> - fix no. 2 (<a href="docs/flesto/flesto_delete_after">flesto_delete_after()</a>) */
  unsigned long <i>delete_after</i>;
};
</pre>
        <h3><span>Last part</span> (the <span>last_part</span> property) points to the last <b>used</b> part of the flesto. The term "last part" will be used many times throughout the documentation, so please do not confuse it with the last part of the array of parts. After the last part there may be unused parts, or "free" parts, without any data.</h3>
        <hr>
        <h1 id="Trivia" class="al">4. Trivia</h1>
        <h3>Suppose that a flesto holds 100 items, differing by 2 items throughout time, and that it has parts, each having size of 20 bytes. This is a bad situation for the flesto - one moment there might be 99 items, and the other there might be 101, meaning one moment there will be 5 parts, but the other time there will be 6 parts. The structure will constantly need to free and allocate one block. In this small scale the phenomenom is neglectable, but it might not be the case for larger size of parts, or larger amount of items chaotically changing. These are the possible fixes:</h3>
        <h3>1. Increase the size of a part to drastically decrease the chance of such situations occuring</h3>
        <h3>2. Do not instantly free empty parts - wait for the previous part to become partially empty first</h3>
        <h3>3. Detect this behavior and resize the last part accordingly</h3>
        <h3>Please keep in mind that flesto is only a tool. The user might find themselves in need to either extend its functionality in situations like the one described above, or optimise it for their own use. If you do feel an urge to modify flesto, feel free to do so - it is rather primitive and small, thus it should be easy to add new functionalities.</h3>
        <hr>
        <h1 id="Documentation" class="al">5. Documentation</h1>
        <h3>These functions are not thread-safe. If you need to run them in a multi-threaded environment, consider using a <a class="dark" href="/docs/mufex">mufex</a>.</h3>
        
        <h2>Initialization and destruction</h2>
        <h3 class="lm"><a href="docs/flesto/flesto">flesto</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_free">flesto_free</a></h3>
        
        <h2>Adding data</h2>
        <h3 class="lm"><a href="docs/flesto/flesto_resize">flesto_resize</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_add_part">flesto_add_part</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_add_parts">flesto_add_parts</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_add_item">flesto_add_item</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_add_items">flesto_add_items</a></h3>
        
        <h2>Removing data</h2>
        <h3 class="lm"><a href="docs/flesto/flesto_remove_empty_parts">flesto_remove_empty_parts</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_remove_item">flesto_remove_item</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_remove_items">flesto_remove_items</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_pop">flesto_pop</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_delete_after">flesto_delete_after</a></h3>
        
        <h2>Miscellaneous</h2>
        <h3 class="lm"><a href="docs/flesto/flesto_trailing_items">flesto_trailing_items</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_idx_to_ptr">flesto_idx_to_ptr</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_ptr_to_idx">flesto_ptr_to_idx</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_copy_items">flesto_copy_items</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_amount_of_items">flesto_amount_of_items</a></h3>
        
        <h2>Safety</h2>
        <h3 class="lm"><a href="docs/flesto/flesto_check_address">flesto_check_address</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_check_address1">flesto_check_address1</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_check_address2">flesto_check_address2</a></h3>
        <h3 class="lm"><a href="docs/flesto/flesto_check_address3">flesto_check_address3</a></h3>
      </div>
    </section>
  </body>
</html>