<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Misc | Docs</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/style.css" media="all">
  </head>
  <body>
    <section id="top-bar">
      <table>
        <tr>
          <th>
            <img src="/icon.png" width="32" height="32">
          </th>
          <th>
            <a id="name" class="noul" href="https://github.com/supahero1">Sh√§dam</a>
          </th>
          <th id="title">Miscellaneous</th>
          <th>
            <a id="home" class="noul" href="/">Home</a>
          </th>
        </tr>
      </table>
    </section>
    <section id="page">
      <div>
        <h1 id="Contents" class="al">Contents</h1>
        <h3>1. <a class="ul" href="/docs/mics/#Description">Description</a></h3>
        <h3>2. <a class="ul" href="/docs/mics/#Specification">Specification</a></h3>
        <h3>3. <a class="ul" href="/docs/mics/#Documentation">Documentation</a></h3>
        <hr>
        <h1 id="Description" class="al">1. Description</h1>
        <h3>This module is a set of functions or sub-modules that do not deserve their own module.</h3>
        <hr>
        <h1 id="Specification" class="al">2. Specification</h1>
        <h2 id="Contmem">Contmem</h2>
        <h3>Continuous memory, or contmem for short, is an extension of the <a class="dark" href="/docs/avl">AVL tree</a> module. Since the tree works based on pointers, the code would need to waste incredible amount of time going through every node and adjusting pointers in case of <span>realloc</span> changing location of the memory.</h3>
        <h3>Contmem consists of <span>blocks</span>, which are just memory allocated using <span>malloc</span> with a little bit of metainformation included in them. If more memory is needed, new blocks are allocated and added to the whole, and if it is detected that we don't need a block anymore, it is disconnected and freed. Size of a block is adjustable, as well as the threshold (<span>tolerance</span> in the code) defining how many bytes must become free in order to free the last unused block (if there is any).</h3>
        <h3>Blocks of a contmem are connected using a doubly linked list, which is different from other, now deleted module, because in the past blocks would be stored in an array. That solution turned out to not give any real benefits and only generated disadvantages.</h3>
        <h3>Contmem was first used in the <a class="dark" href="/docs/time">time</a> module.</h3>
        <h2 id="Mufex">Mufex</h2>
        <h3>Mutual function exclusion, or mufex for short, is an extension of the <a class="dark" href="/docs/avl">AVL tree</a> module. It was created, because of how AVL tree works in a multi-threaded environment - insert and delete functions cannot be safely executed along with other methods accessing a tree, because they change the state of the tree. Solution is fairly simple - just use a mutex to mutually exclude them. However, that creates a performance issue - what if we initiated a search, and another search would like to take place? Two or more searches are fine, because they don't change the tree in any way. To solve this issue, another mutex and a counter is used (in similar fashion to a semaphore, except this works backwards).</h3>
        <h3>There are many more situations like the one described above. Thus, to not keep writing the same code over and over again, this sub-module has been created.</h3>
        <hr>
        <h1 id="Documentation" class="al">3. Documentation</h1>
        <h3>These functions are not thread-safe. If you need to run them in a multi-threaded environment, consider using a <a class="dark" href="/docs/misc#Mufex">mufex</a>.</h3>
        <h2>Contmem</h2>
        <h3 class="lm"><a href="/docs/mics/contmem">contmem()</a></h3>
        <h3 class="lm"><a href="/docs/mics/contmem_get">contmem_get()</a></h3>
        <h3 class="lm"><a href="/docs/mics/contmem_pop">contmem_pop()</a></h3>
        <h3 class="lm"><a href="/docs/mics/contmem_last">contmem_last()</a></h3>
        <h3 class="lm"><a href="/docs/mics/contmem_free">contmem_free()</a></h3>
        <h2>Mufex</h2>
        <h3 class="lm"><a href="/docs/mics/mufex">mufex()</a></h3>
        <h3 class="lm"><a href="/docs/mics/mufex_lock">mufex_lock()</a></h3>
        <h3 class="lm"><a href="/docs/mics/mufex_unlock">mufex_unlock()</a></h3>
        <h3 class="lm"><a href="/docs/mics/mufex_destroy">mufex_destroy()</a></h3>
      </div>
    </section>
  </body>
</html>